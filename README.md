# Review Planner —— 复习计划智能安排系统

> 🎁 谨以此项目献给最好的格斯桐小朋友，愿你的每一份努力都被温柔对待。

## 项目简介

**Review Planner** 是一个前后端分离的智能复习计划安排系统。  
系统以考试为核心，围绕学科和知识点，结合输入、理解、输出三个学习阶段，通过科学调度算法，在有限时间内最大化复习效率。  
它不仅关注学习任务本身，还通过记录学习日志，帮助用户持续优化复习节奏和策略。

---

## 数据库设计

系统使用 SQLite 管理核心数据，涵盖考试、学科、知识点、学习材料、作息时间与学习记录六大模块。

### 1. 考试与学科管理

- **`Exam`**  
  存储不同考试的信息，例如期末考试、托福考试等。每个考试可以设置优先级（0～9，数值越小优先级越高）。

- **`Subject`**  
  存储考试下属的各个学科，如数学、英语等。学科同样可以设定优先级，便于精细化安排。

### 2. 知识点树状结构

- **`TopicNode`**  
  以树形结构组织学科内的知识点。每个节点记录：
  - 所属学科
  - 名称
  - 是否是叶子节点
  - 准确率（accuracy）
  - 重要性评分（0～9）

  支持父子节点关系，适配从总览到细分知识点的不同粒度管理。

### 3. 学习材料管理

- **`InputMaterial`**（输入材料）  
  针对每个知识点，关联笔记、视频、背诵材料：
  - 类型包括 `note`（笔记）、`video`（视频）、`recite`（背诵）
  - 记录预计学习时间、已完成时间、完成状态

- **`OutputMaterial`**（输出材料）  
  与考试、学科或知识点关联的刷题和模拟练习：
  - 类型包括 `exercise_set`（练习集）、`mock_exam`（模拟考试）
  - 同样记录预计时长、完成情况和准确率

### 4. 学习日志记录

- **`ReviewTaskLog`**  
  记录每次学习任务的详细情况，包括：
  - 任务对应的节点（考试、学科或知识点）
  - 输入或输出材料ID
  - 学习时长（分钟）
  - 备注笔记

  日志为后续复盘分析提供基础数据支持。

### 5. 作息时间管理

- **`DefaultSchedule`**  
  定义每周一到周日的默认可用时间段（如每晚18:00-22:00）。

- **`SpecialSchedule`**  
  定义特定日期（如假期、考试周）的特殊可用时间，优先级高于默认时间。

---

## 核心调度逻辑

调度系统以时间段为单位，依据科学学习循环（输入 → 理解 → 输出）进行任务分配，具体包括：

- 将可用时间划分为**30分钟小段**，灵活排布
- 自动按照日内节奏轮换三类任务，保证学习多样性
- 根据优先级、准确率和重要性，动态挑选最优学习任务
- 合理利用连续时间段以支持长时间刷题或模拟考试
- 每完成一项学习任务，实时更新对应材料进度和准确率
- 生成友好格式的复习计划，便于前端直接渲染展示

通过上述设计，系统能够最大化利用有限时间，高效引导复习进程，减少无效学习，提升整体掌握度。

---

## 🛠️ 启动方式

### 开发环境
```bash
# 初始化数据库
python db_init.py

# 随机插入数据
python insert_sample_data.py

# 启动后端
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

# 启动前端
npm run dev
```

### 生产环境

#### 手动测试
```bash
# 启动后端
gunicorn main:app -k uvicorn.workers.UvicornWorker --bind 127.0.0.1:8000

# 编译前端
npm run build
cp ./dist/* /var/www/my-frontend/
```

#### 一键部署
```bash
bash deploy.sh
```